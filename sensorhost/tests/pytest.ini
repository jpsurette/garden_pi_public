[pytest]
# pytest.ini - pytest configuration file

# Test discovery
testpaths = .
python_files = test_*.py *_test.py *_tests.py
python_classes = Test*
python_functions = test_*

# Minimum version
minversion = 6.0

# Command line options
addopts =
    -v
    --strict-markers
    --strict-config
    --tb=short
    --show-capture=no
    --durations=10

# Test markers
markers =
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
    slow: Slow running tests
    mqtt: Tests involving MQTT functionality
    sensor: Tests involving sensor hardware
    error_handling: Tests for error handling scenarios
    performance: Performance-related tests
    smoke: Smoke tests for basic functionality

# Warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning

# Test timeout (in seconds) - requires pytest-timeout
#timeout = 300
#timeout_method = thread

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Environment variables for testing - requires pytest-env
#env =
#    PYTHONPATH = .
#    TESTING = 1
#    SENSOR_NAME = test_sensor
#    MQTT_BROKER = mosquitto
#    MQTT_PORT = 1883
#    INFLUXDB_BUCKET = test_bucket
#    INFLUXDB_URL = http://localhost:8086
#    INFLUXDB_TOKEN = test_token
#    INFLUXDB_ORG = test_org
#    INFLUXDB_USER = test_user
#    INFLUXDB_PASSWORD = test_password